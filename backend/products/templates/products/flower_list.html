{% extends 'base.html' %}
{% load poll_extras %}

{% block static %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'products/css/style.css' %}">
{% endblock %}


{% block title %} Цветы {% endblock %}


{% block content %}

        {% include 'includes/header.html' %}

        <main>
            <div class="container">

                <div class="row row-cols-1 row-cols-xs-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-4 row-cols-xxl-5 justify-content-center">
                    
                    {% for flower in flowers %}
                        <div class="col justify-content-center">

                            <!--Product card-->
                            <div class="card">

                                <a href="{{ flower.slug }}" target="_blank" style="text-decoration:none;" data-bs-toggle="modal" data-bs-target="#Modal{{ flower.id }}">
                                    
                                    <img src="{{ flower.preview.url }}" class="card-img-top" alt="{{ flower.preview.url }}">

                                    <div class="card-body text-center">

                                        <h5 class="link-primary">
                                            {{ flower.title }}
                                        </h5>

                                    </div>
                                </a>

                                <div class="card-footer d-flex justify-content-between align-items-end">

                                    <div class="product-price">

                                        {% if flower.discount == 0 %}

                                            <span class="price-text">
                                                {{ flower.discount_price|floatformat:0 }} &#8381;
                                            </span>

                                        {% else %}

                                            <div class="price-product-with-discount">
                                                <span>
                                                    <del class="old-price">{{ flower.price|floatformat:0 }} &#8381;</del>
                                                </span>

                                                <br style="display: block; margin-bottom: -10px;">

                                                <span class="price-text">
                                                    {{ flower.discount_price|floatformat:0 }} &#8381;
                                                </span>
                                            </div>

                                        {% endif %}

                                    </div>

                                    <div class="product-cart-icon">
                                        <a href="#">
                                            <img src="{% static 'products/icons/shopping-bag-icon.png' %}" alt="shopping-bag-icon" width="35rem">
                                        </a>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <!--Modal-->
                        <div class="modal fade modal-lg" id="Modal{{ flower.id }}" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content">

                                    <div class="modal-header">
                                        
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>

                                    <div class="modal-body">
                                        <div class="container">
                                        
                                            <div class="row row-cols-2">
                                                <div class="col">

                                                    <!--Carousel images-->
                                                    <div id="carouselModal{{ flower.slug }}" class="carousel carousel-dark slide" data-bs-ride="carousel" data-bs-touch="true">

                                                        <div class="carousel-inner">    
                                                            <div class="carousel-item active">
                                                                <img class="d-block w-100" src="{{ flower.preview.url }}" alt="flower {{ flower.title }}">
                                                            </div>

                                                            {% for gallery in gallery_flower %}
                                                                {% if gallery.flower_gallery_id == flower.id %}
                                                                    <div class="carousel-item">
                                                                        <img class="d-block w-100" src="{{ gallery.image.url }}" alt="flower {{ flower.title }}">
                                                                    </div>
                                                                {% endif %}
                                                            {% endfor %}
                                                        </div>
                                                    
                                                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselModal{{ flower.slug }}" data-bs-slide="prev">
                                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                            <span class="visually-hidden">Назад</span>
                                                        </button>
                                                        <button class="carousel-control-next" type="button" data-bs-target="#carouselModal{{ flower.slug }}" data-bs-slide="next">
                                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                            <span class="visually-hidden">Дальше</span>
                                                        </button>
                                                    
                                                    </div>
                                                    <!--Carousel images-->
                                                </div>

                                                <div class="col">
                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">{{ flower.title }}</h1>
                                                    {{ flower.description }}<br>
                                                    {{ flower.price }}<br>
                                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illum quibusdam nobis veniam architecto, at non sint sed maxime, esse reiciendis eligendi cumque aliquam ab dolorum unde? Accusamus, repellat. Maiores, adipisci!
                                                    Facere tenetur ab earum, officiis corporis cum nesciunt ipsam saepe, voluptas numquam quae quibusdam reprehenderit quia est ullam aut! Quas debitis nihil provident aspernatur, cumque facilis distinctio explicabo quis ipsa.
                                                    Vero praesentium eius nesciunt facilis velit expedita similique tenetur, unde consequatur aliquid fugiat molestiae deserunt illum voluptatibus quas quo odit beatae dicta voluptate placeat aliquam temporibus atque itaque! Fuga, voluptate!
                                                    Porro sed, alias unde rem perspiciatis ea assumenda accusamus quos dolorum corrupti omnis eum. Quidem iure nulla, ad debitis omnis corrupti. Sit in aperiam vel totam vitae, cupiditate tenetur eius.
                                                    Odio consectetur esse nostrum odit quasi facere est reprehenderit accusamus, ea expedita dolor distinctio blanditiis cumque ipsam eveniet, saepe sed culpa doloribus quos. Quos ab temporibus ducimus? Voluptatem, praesentium asperiores!
                                                    Explicabo inventore illum corrupti, at ullam nesciunt reiciendis natus nemo quos doloribus ex vitae mollitia quisquam perferendis atque earum in quod asperiores amet esse officia ab quis. Provident, cumque veritatis.
                                                    Quaerat itaque assumenda, accusantium alias ab, sed deserunt distinctio doloremque laudantium expedita atque natus veritatis, aspernatur aperiam quod veniam voluptatum! Suscipit doloribus quaerat repellat recusandae non perspiciatis praesentium corrupti earum.
                                                    Et animi voluptatem architecto, ipsam nisi corrupti laudantium eos, labore culpa doloremque officiis? Illo voluptates optio consequuntur cupiditate aut fugiat iusto fuga suscipit in accusantium, architecto quidem a, nostrum nesciunt!
                                                    Accusantium laudantium consequuntur aliquam voluptatum, cumque quaerat dignissimos molestiae, ullam nulla provident, quam perspiciatis error sed repellat itaque delectus. Alias corporis doloremque quisquam corrupti delectus sint aut porro iure est.
                                                    Veniam nobis laborum impedit consequatur, autem ullam quis itaque deserunt nihil unde neque, labore nesciunt facilis aspernatur aut laudantium, similique earum voluptas modi. Ipsam, enim assumenda numquam molestias labore obcaecati.
                                                    Velit ad quo atque voluptate nulla esse, magni nihil inventore accusamus totam nostrum assumenda nemo harum fugiat quae eaque aspernatur quas temporibus accusantium? Perspiciatis, tempore maiores sint autem ex doloribus?
                                                    Maiores itaque ad voluptatem reprehenderit esse aut minus ullam quam praesentium sapiente cum omnis tempore officiis rerum voluptas nihil vel, nesciunt deleniti id quasi eveniet unde dolorem est? Atque, quia?
                                                    Ad qui voluptatum iste iusto consequuntur ducimus commodi, odit eius laborum suscipit blanditiis possimus dolores ut fugit quia eligendi repellendus eos odio consectetur aspernatur excepturi iure sed culpa? Tenetur, beatae!
                                                    Iure quos ipsa cum repudiandae tempora aliquam recusandae eos molestiae eius laboriosam, soluta voluptatibus numquam alias dignissimos nostrum itaque accusantium saepe? Natus ad consequatur eum error facilis commodi neque eveniet.
                                                    Maxime vero cupiditate in dicta molestiae accusantium, explicabo soluta ipsa quisquam nisi omnis deleniti. Quam distinctio autem dolore? Tenetur recusandae dolore excepturi beatae obcaecati. Eius quis fuga accusamus consequuntur nisi.
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <div class="modal-footer">

                                        <div class="price-modal">
                                            {% if flower.discount == 0 %}

                                                <span class="price-text">
                                                    {{ flower.discount_price|floatformat:0 }} &#8381;
                                                </span>

                                            {% else %}

                                                <div class="price-product-with-discount">
                                                    <span>
                                                        <del class="old-price">{{ flower.price|floatformat:0 }} &#8381;</del>
                                                    </span>

                                                    <!-- <br style="display: block; margin-bottom: -10px;"> -->

                                                    <span class="price-text">
                                                        {{ flower.discount_price|floatformat:0 }} &#8381;
                                                    </span>
                                                </div>

                                            {% endif %}
                                        </div>

                                        <div class="counter-products">
 
                                            <button type="button" class="btn btn-unstyled counter-item">
                                                <img src="{% static 'products/icons/minus-icon.svg' %}" alt="shopping-bag-icon" width="30rem">
                                            </button>
                                            <span style="font-size: 25px;">1</span>
                                            <button type="button" class="btn btn-unstyled counter-item">
                                                <img src="{% static 'products/icons/plus-icon.svg' %}" alt="shopping-bag-icon" width="30rem">
                                            </button>

                                        </div>

                                        <button type="button" class="btn btn-secondary">
                                            Добавить в корзину
                                        </button>
                                        <button type="button" class="btn btn-primary">
                                            Купить сейчас
                                        </button>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!--Modal-->

                    {% endfor %}

                </div>

                <nav>
                    <ul class="pagination justify-content-center">
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>


            </div>
        
        </main>

        {% include 'includes/footer.html' %}

    </div>
{% endblock %}